<launch>
    <arg name="mav_name" default="firefly"/>
    <arg name="gimbal_camera_name" default="pan_tilt_camera" />
    <arg name="vs_front_end" default="tag_extractor" />
    <arg name="video_path" default="$(find drone_evaluation)/testset/test.mp4"/>
    <group ns="$(arg mav_name)">
        <node name="playback" pkg="drone_evaluation" type="playback_node.py" args="$(arg gimbal_camera_name) $(arg video_path)" output="screen"/>
        <rosparam command="load" file="$(find vs_front_end)/config/camera_intrinsic.yaml" ns="$(arg gimbal_camera_name)/camera_intrinsic"/>
        <node name="$(arg vs_front_end)" pkg="vs_front_end" type="$(arg vs_front_end)_node.py" args="$(arg gimbal_camera_name)" output="screen"/>
        <node name="ibvs_controller" pkg="vs_control" type="ibvs_controller_node.py" args="$(arg gimbal_camera_name) $(arg vs_front_end)" output="screen">
            <rosparam command="load" file="$(find vs_control)/config/ibvs_controller.yaml" />
        </node>
        <node name="joy_node" pkg="joy" type="joy_node"/>
        <node name="ibvs_joy_control" pkg="drone_joy_interface" type="ibvs_joy_control_node.py" output="screen"/>
        <node name="cv_view" pkg="image_view" type="image_view" args="image:=/$(arg mav_name)/$(arg vs_front_end)/image_output">
            <param name="autosize" type="bool" value="true"/>
        </node>
    </group>
</launch>
